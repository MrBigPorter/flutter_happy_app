

---

# 🚀 Lucky IM v4.2 核心剩余战役 (Backlog Refined)

> **🎯 排序逻辑**：
> 1. **性能 (P0)**：列表卡顿是死穴，优先解决，面试必问。
> 2. **架构 (P1)**：收发闭环、UI 扩展性，体现系统设计能力。
> 3. **业务 (P2)**：堆功能，基于 P1 的地基快速落地。
> 4. **极致 (P3)**：最后的 5% 优化。
>
>

---

## 👑 第一梯队：性能与架构 (The Senior Gap)

**JD 考点**：*“优化应用性能，提升启动速度、动画流畅度”* / *“具备良好的架构设计能力”*

| 优先级 | ID | 任务模块 | 核心改动点 | 战术价值 (面试) |
| --- | --- | --- | --- | --- |
| **P0** | **2.3** | **路径同步预热**<br>

<br>(Path Sync) | **数据层提前解析** AssetID 转 Path，**废弃 UI 层 FutureBuilder**。彻底消除列表滑动时的等待和闪烁。 | **杀手锏**：证明你懂 Flutter 渲染机制，知道为什么 ListView 里不能用 FutureBuilder。 |
| **P1** | **4.1** | **下载管道**<br>

<br>(Download Pipeline) | 设计 `DownloadManager`，实现：消息接收 -> 自动判重 -> 进队列下载 -> 落地缓存。 | **闭环思维**：证明你不仅会“发”，还会处理复杂的“收”和“缓存管理”。 |
| **P1** | **3.1** | **全能菜单重构**<br>

<br>(Plus Menu Grid) | 封装可配置的 `ActionSheet` (Grid Layout)，支持分页、动态添加入口。 | **组件化**：展示封装能力，为后面的文件、位置提供统一插槽。 |

---

## ⚔️ 第二梯队：业务扩张 (Feature Expansion)

**JD 考点**：*“根据产品需求完成 UI 界面、交互逻辑”* / *“熟悉前后端联调”*

| 优先级 | ID | 任务模块 | 核心改动点 | 战术价值 (面试) |
| --- | --- | --- | --- | --- |
| **P2** | **3.2** | **文件消息**<br>

<br>(File Message) | 扩展 Pipeline 支持 `FilePicker`，识别 PDF/DOC/ZIP 后缀并匹配图标。 | **业务广度**：展示对非媒体类（文件流）的处理能力。 |
| **P2** | **3.3** | **位置消息**<br>

<br>(Location) | 集成地图 SDK 截图接口，发送静态快照，点击唤起导航。 | **原生交互**：展示对接第三方 SDK 和处理原生 Intent 的能力。 |

---

## 🧹 第三梯队：极致优化 (Final Polish)

**JD 考点**：*“内存使用效率”*

| 优先级 | ID | 任务模块 | 核心改动点 | 战术价值 (面试) |
| --- | --- | --- | --- | --- |
| **P3** | **4.2** | **头像持久化**<br>

<br>(Avatar Caching) | 将实时计算的群聊九宫格头像 (`CustomPainter`) 转为 PNG 本地缓存。 | **极致性能**：在几千人群聊场景下的极限优化方案。 |

---

### 💡 执行建议

大哥，虽然 **[3.1] 菜单** 是你最想做的（因为它看得见摸得着），但从**技术含金量**来说，我强烈建议：

1. **先杀 [2.3] 路径预热**：
* **理由**：现在的列表里如果有 `FutureBuilder`，滑得越快卡得越狠。把它改成同步（Sync），你的 App 手感会瞬间从“卡顿”变成“丝滑”。
* **耗时**：短（纯逻辑修改）。


2. **再做 [3.1] 菜单重构**：
* **理由**：地基稳了，再搭台子唱戏。



